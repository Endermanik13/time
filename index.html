ты остановился делать код на моменте, вот что ты успел написать (НАДО ВЕСЬ КОД, но продолжи с этого момента)
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Расписание IT TOP</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0f172a;
            --bg-light: #1e293b;
            --accent-blue: #60a5fa;
            --accent-green: #34d399;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --highlight: #1e40af;
            --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', sans-serif;
        }
        
        body {
            background-color: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow: auto;
        }

        /* Анимированный фон с молекулами */
        #constellations-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.15;
            pointer-events: none;
        }

        /* Заголовок */
        .header {
            text-align: center;
            padding: 1rem 0;
            background: linear-gradient(90deg, rgba(30,64,175,0.2) 0%, rgba(52,211,153,0.2) 100%);
            margin-bottom: 0.5rem;
            border-bottom: 1px solid rgba(96, 165, 250, 0.3);
        }

        .header h1 {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--accent-blue) 0%, var(--accent-green) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        /* Контейнер */
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0.8rem;
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 1rem;
            min-height: calc(100vh - 80px);
        }
        
        /* Карточки */
        .card {
            background-color: var(--bg-light);
            border-radius: 12px;
            padding: 1rem;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
        }
        
        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--accent-blue);
            display: flex;
            align-items: center;
        }
        
        .card-title i {
            margin-right: 0.5rem;
        }
        
        /* Текущий статус */
        .current-status {
            grid-column: 2;
            position: relative;
            overflow: hidden;
        }
        
        .current-status::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(96, 165, 250, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%);
            z-index: -1;
        }
        
        .status-badge {
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.7rem;
            background-color: var(--highlight);
            color: white;
        }
        
        .status-badge.lesson {
            background-color: #1e40af;
        }
        
        .status-badge.break {
            background-color: #7c3aed;
        }
        
        .status-badge.dayoff {
            background-color: #d97706;
        }
        
        /* Таймер */
        .timer-container {
            text-align: center;
            margin: 0.8rem 0;
            position: relative;
            flex-shrink: 0;
        }
        
        .timer {
            font-size: 2.2rem;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            color: var(--accent-green);
            margin: 0.5rem 0;
            text-shadow: 0 0 10px rgba(52, 211, 153, 0.3);
        }
        
        .timer-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.3rem;
        }
        
        /* Информация о паре */
        .lesson-info {
            background-color: rgba(15, 23, 42, 0.7);
            padding: 0.8rem;
            border-radius: 8px;
            margin-bottom: 0.8rem;
            border-left: 3px solid var(--accent-blue);
            flex-shrink: 0;
        }
        
        .lesson-name {
            font-size: 1.1rem;
            margin-bottom: 0.3rem;
            color: var(--text-primary);
        }
        
        .lesson-time {
            color: var(--accent-blue);
            font-size: 0.8rem;
            margin-bottom: 0.3rem;
            display: flex;
            align-items: center;
        }
        
        .lesson-time i {
            margin-right: 0.4rem;
        }
        
        .lesson-details {
            display: flex;
            flex-wrap: wrap;
            gap: 0.6rem;
            margin-top: 0.6rem;
            font-size: 0.8rem;
        }
        
        .detail-item {
            display: flex;
            align-items: center;
            color: var(--text-secondary);
            white-space: nowrap;
        }
        
        .detail-item i {
            margin-right: 0.4rem;
            color: var(--accent-blue);
        }
        
        /* Следующая/предыдущая пара */
        .next-prev-card {
            margin-bottom: 1rem;
        }
        
        .next-prev-info {
            background-color: rgba(15, 23, 42, 0.7);
            padding: 0.8rem;
            border-radius: 8px;
            margin-bottom: 0.6rem;
            border-left: 3px solid var(--highlight);
        }
        
        .next-prev-name {
            font-size: 0.9rem;
            margin-bottom: 0.2rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .next-prev-time {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }
        
        .empty-state {
            color: var(--text-secondary);
            font-style: italic;
            text-align: center;
            padding: 0.6rem;
            font-size: 0.8rem;
        }
        
        /* Расписание на день */
        .day-schedule {
            margin-top: 0.6rem;
            max-height: 180px;
            overflow-y: auto;
            flex-grow: 1;
            scrollbar-width: thin;
            scrollbar-color: var(--accent-blue) var(--bg-light);
        }

        /* Кастомный скроллбар */
        .day-schedule::-webkit-scrollbar {
            width: 6px;
        }

        .day-schedule::-webkit-scrollbar-track {
            background: var(--bg-light);
            border-radius: 3px;
        }

        .day-schedule::-webkit-scrollbar-thumb {
            background-color: var(--accent-blue);
            border-radius: 3px;
        }
        
        .schedule-item {
            display: flex;
            justify-content: space-between;
            padding: 0.6rem;
            margin-bottom: 0.3rem;
            background-color: rgba(15, 23, 42, 0.5);
            border-radius: 6px;
            border-left: 3px solid transparent;
            font-size: 0.8rem;
        }
        
        .schedule-item.current {
            background-color: rgba(30, 64, 175, 0.2);
            border-left-color: var(--accent-blue);
        }
        
        .schedule-time {
            font-weight: 600;
            color: var(--accent-blue);
            min-width: 90px;
        }
        
        .schedule-name {
            flex-grow: 1;
            padding: 0 0.6rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .schedule-room {
            color: var(--text-secondary);
            min-width: 45px;
            text-align: right;
        }
        
        /* Стили для присутствия */
        .attendance-card {
            margin-top: 1rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .attendance-title {
            font-size: 1rem;
            margin-bottom: 0.6rem;
            color: var(--accent-blue);
        }
        
        .attendance-count {
            font-size: 0.9rem;
            margin-bottom: 0.6rem;
            color: var(--text-primary);
            text-align: center;
        }
        
        .attendance-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.4rem;
            margin-top: 0.6rem;
        }
        
        .student-item {
            padding: 0.5rem;
            background-color: rgba(15, 23, 42, 0.5);
            border-radius: 5px;
            display: flex;
            align-items: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 0.8rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .student-item.selected {
            background-color: rgba(52, 211, 153, 0.2);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }
        
        .student-item i {
            margin-right: 0.3rem;
            font-size: 0.7rem;
        }
        
        /* Прогресс бар */
        .progress-container {
            width: 100%;
            height: 5px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin: 0.6rem 0;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .progress-bar {
            height: 100%;
            background-color: var(--accent-green);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        /* Календарь */
        .calendar-card {
            margin-top: 1rem;
            flex-shrink: 0;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.6rem;
        }
        
        .calendar-title {
            font-size: 1rem;
            color: var(--accent-blue);
        }
        
        .calendar-nav {
            display: flex;
            gap: 0.3rem;
        }
        
        .calendar-nav-btn {
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            padding: 0.2rem;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.3rem;
        }
        
        .calendar-day-header {
            text-align: center;
            font-size: 0.7rem;
            color: var(--text-secondary);
            padding: 0.2rem;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 5px;
            cursor: pointer;
            position: relative;
            font-size: 0.7rem;
        }
        
        .calendar-day.current {
            background-color: var(--accent-blue);
            color: var(--bg-dark);
            font-weight: bold;
        }
        
        .calendar-day.has-lessons::after {
            content: '';
            position: absolute;
            bottom: 2px;
            width: 4px;
            height: 4px;
            background-color: var(--accent-green);
            border-radius: 50%;
        }
        
        .calendar-day.weekend {
            color: var(--text-secondary);
        }

        /* Модальное окно календаря */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(3px);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--bg-light);
            border-radius: 10px;
            padding: 1.2rem;
            max-width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            width: 500px;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 0.6rem;
            right: 0.6rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.1rem;
            cursor: pointer;
        }

        /* Анимации */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Пульсация для таймера */
        .pulse {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }

        /* Анимация окончания таймера */
        .timer-ending {
            animation: timerEnding 0.5s infinite alternate;
        }

        @keyframes timerEnding {
            from { 
                color: var(--accent-green);
                text-shadow: 0 0 10px rgba(52, 211, 153, 0.3);
            }
            to { 
                color: #f87171;
                text-shadow: 0 0 15px rgba(248, 113, 113, 0.5);
            }
        }

        /* Анимация начала занятия */
        .lesson-starting {
            animation: lessonStarting 0.5s infinite alternate;
        }

        @keyframes lessonStarting {
            from { 
                color: var(--accent-green);
                text-shadow: 0 0 10px rgba(52, 211, 153, 0.3);
            }
            to { 
                color: #60a5fa;
                text-shadow: 0 0 15px rgba(96, 165, 250, 0.5);
            }
        }

        /* Анимация конца всех занятий */
        .day-ending {
            animation: dayEnding 1s infinite alternate;
        }

        @keyframes dayEnding {
            from { 
                color: var(--accent-green);
                text-shadow: 0 0 10px rgba(52, 211, 153, 0.3);
            }
            to { 
                color: #d97706;
                text-shadow: 0 0 15px rgba(217, 119, 6, 0.5);
            }
        }

        /* Адаптивность */
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
                height: auto;
            }
            
            .current-status {
                grid-column: 1;
            }
            
            .timer {
                font-size: 2rem;
            }
            
            .card {
                margin-bottom: 1rem;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 0.6rem;
                gap: 0.8rem;
            }
            
            .lesson-details {
                flex-direction: column;
                gap: 0.3rem;
            }
            
            .schedule-item {
                flex-direction: column;
                gap: 0.2rem;
            }
            
            .schedule-time, .schedule-room {
                min-width: auto;
                text-align: left;
            }

            .modal-content {
                width: 90%;
                padding: 1rem;
            }
            
            .attendance-list {
                grid-template-columns: 1fr;
            }
            
            .card-title {
                font-size: 0.9rem;
            }
            
            .lesson-name {
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .timer {
                font-size: 1.6rem;
            }

            .lesson-name {
                font-size: 0.95rem;
            }

            .card {
                padding: 0.6rem;
            }

            .student-item {
                font-size: 0.7rem;
            }

            .header h1 {
                font-size: 1.5rem;
            }
            
            .next-prev-info, .lesson-info {
                padding: 0.6rem;
            }
            
            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .status-badge {
                align-self: flex-end;
            }
        }
    </style>
</head>
<body>
    <!-- Анимированный фон с созвездиями -->
    <canvas id="constellations-bg"></canvas>
    
    <!-- Заголовок -->
    <div class="header">
        <h1>Расписание IT TOP</h1>
    </div>
    
    <!-- Модальное окно календаря -->
    <div class="modal" id="calendar-modal">
        <div class="modal-content">
            <h3 id="modal-day-title">Расписание на 31 марта</h3>
            <div class="day-schedule" id="modal-day-schedule"></div>
            <button class="modal-close" id="modal-close">&times;</button>
        </div>
    </div>
    
    <div class="container">
        <!-- Левая колонка - предыдущая пара и календарь -->
        <div class="left-column">
            <div class="card next-prev-card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-backward"></i> Предыдущая пара</h2>
                </div>
                <div class="next-prev-info" id="prev-lesson">
                    <div class="empty-state">Отсутствует</div>
                </div>
            </div>
            
            <div class="card calendar-card">
                <div class="calendar-header">
                    <h3 class="calendar-title">Апрель 2025</h3>
                    <div class="calendar-nav">
                        <button class="calendar-nav-btn" id="prev-month"><i class="fas fa-chevron-left"></i></button>
                        <button class="calendar-nav-btn" id="next-month"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
                <div class="calendar-grid" id="calendar-grid">
                    <div class="calendar-day-header">Пн</div>
                    <div class="calendar-day-header">Вт</div>
                    <div class="calendar-day-header">Ср</div>
                    <div class="calendar-day-header">Чт</div>
                    <div class="calendar-day-header">Пт</div>
                    <div class="calendar-day-header weekend">Сб</div>
                    <div class="calendar-day-header weekend">Вс</div>
                    <!-- Дни будут заполнены JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- Центральная колонка - текущий статус -->
        <div class="card current-status">
            <div class="card-header">
                <h2 class="card-title"><i class="fas fa-chalkboard-teacher"></i> Текущее занятие</h2>
                <span class="status-badge break" id="status-type">Перерыв</span>
            </div>
            
            <div class="timer-container">
                <div class="timer-label">До конца перерыва</div>
                <div class="timer pulse" id="timer">00:25:14</div>
            </div>
            
            <div class="lesson-info" id="current-lesson">
                <h3 class="lesson-name">Перерыв между парами</h3>
                <div class="lesson-time"><i class="far fa-clock"></i> 10:30 - 11:00</div>
                <div class="lesson-details">
                    <div class="detail-item"><i class="fas fa-user-tie"></i> Преподаватель: -</div>
                    <div class="detail-item"><i class="fas fa-door-open"></i> Аудитория: -</div>
                </div>
            </div>
        </div>
        
        <!-- Правая колонка - следующая пара и расписание на день -->
        <div class="right-column">
            <div class="card next-prev-card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-forward"></i> Следующая пара</h2>
                </div>
                <div class="next-prev-info" id="next-lesson">
                    <div class="next-prev-name">Физика</div>
                    <div class="next-prev-time">11:00 - 12:30</div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-calendar-day"></i> Расписание на понедельник, 14 апреля</h2>
                </div>
                <div class="day-schedule" id="day-schedule">
                    <!-- Расписание на день будет заполнено JavaScript -->
                </div>
            </div>

            <!-- Блок присутствия -->
            <div class="card attendance-card">
                <h3 class="attendance-title"><i class="fas fa-user-check"></i> Присутствие</h3>
                <div class="attendance-count">
                    Присутствует: <span id="attendance-count">0</span> из <span id="total-students">12</span>
                </div>
                <div class="progress-container">
                    <div class="progress-bar" id="attendance-progress" style="width: 0%"></div>
                </div>
                <div class="attendance-list" id="attendance-list">
                    <!-- Список студентов будет заполнен JavaScript -->
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-info-circle"></i> Информация</h2>
                </div>
                <div class="lesson-details">
                    <div class="detail-item"><i class="fas fa-building"></i> Корпус: Главный</div>
                    <div class="detail-item"><i class="fas fa-users"></i> Группа: 9/2-РПО-23/1</div>
                    <div class="detail-item"><i class="fas fa-calendar-week"></i> Неделя: 5 (четная)</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Данные расписания
        const scheduleData = {
            "2025-04-14": {
                lessons: [
                    { type: "lesson", name: "Разработка программных модулей", start: "08:00", end: "09:30", teacher: "Медведев С.П.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "09:30", end: "09:40" },
                    { type: "lesson", name: "Разработка программных модулей", start: "09:40", end: "11:10", teacher: "Медведев С.П.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "11:10", end: "11:35" },
                    { type: "lesson", name: "Поддержка и тестирование программных модулей", start: "11:35", end: "13:05", teacher: "Медведев С.П.", room: "405 3D" },
                    { type: "break", name: "Обед", start: "13:05", end: "13:15" },
                    { type: "lesson", name: "Поддержка и тестирование программных модулей", start: "13:15", end: "14:45", teacher: "Медведев С.П.", room: "405 3D" }
                ]
            },
            "2025-04-15": {
                lessons: [
                    { type: "lesson", name: "Разработка программных модулей", start: "08:00", end: "09:30", teacher: "Медведев С.П.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "09:30", end: "09:40" },
                    { type: "lesson", name: "Разработка программных модулей", start: "09:40", end: "11:10", teacher: "Медведев С.П.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "11:10", end: "11:35" },
                    { type: "lesson", name: "История СПО", start: "11:35", end: "13:05", teacher: "Балтаев С.Р.", room: "405 3D" },
                    { type: "break", name: "Обед", start: "13:05", end: "13:15" },
                    { type: "lesson", name: "Разработка мобильных приложений", start: "13:15", end: "14:45", teacher: "Морозов В.В.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "14:45", end: "14:55" },
                    { type: "lesson", name: "Разработка мобильных приложений", start: "14:55", end: "16:25", teacher: "Морозов В.В.", room: "405 3D" }
                ]
            },
            "2025-04-16": {
                lessons: [
                    { type: "lesson", name: "Иностранный язык в профессиональной деятельности РПО", start: "11:35", end: "13:05", teacher: "Реснянский А.В.", room: "405 3D" },
                    { type: "break", name: "Обед", start: "13:05", end: "13:15" },
                    { type: "lesson", name: "Иностранный язык в профессиональной деятельности РПО", start: "13:15", end: "14:45", teacher: "Реснянский А.В.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "14:45", end: "14:55" },
                    { type: "lesson", name: "Объектно-ориентированное программирование с использованием языка C++", start: "14:55", end: "16:25", teacher: "Морозов В.В.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "16:25", end: "16:50" },
                    { type: "lesson", name: "Объектно-ориентированное программирование с использованием языка C++", start: "16:50", end: "18:20", teacher: "Морозов В.В.", room: "405 3D" }
                ]
            },
            "2025-04-17": {
                lessons: []
            },
            "2025-04-18": {
                lessons: [
                    { type: "lesson", name: "Разработка программных модулей", start: "08:00", end: "09:30", teacher: "Медведев С.П.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "09:30", end: "09:40" },
                    { type: "lesson", name: "Разработка программных модулей", start: "09:40", end: "11:10", teacher: "Медведев С.П.", room: "405 3D" }
                ]
            },
            "2025-04-19": {
                lessons: []
            },
            "2025-04-20": {
                lessons: []
            },
            "2025-04-28": {
                lessons: [
                    { type: "lesson", name: "Разработка программных модулей", start: "08:00", end: "09:30", teacher: "Медведев С.П.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "09:30", end: "09:40" },
                    { type: "lesson", name: "Разработка программных модулей", start: "09:40", end: "11:10", teacher: "Медведев С.П.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "11:10", end: "11:35" },
                    { type: "lesson", name: "Поддержка и тестирование программных модулей", start: "11:35", end: "13:05", teacher: "Медведев С.П.", room: "405 3D" },
                    { type: "break", name: "Обед", start: "13:05", end: "13:15" },
                    { type: "lesson", name: "Объектно-ориентированное проектирование. Язык UML и паттерны проектирования", start: "13:15", end: "14:45", teacher: "Медведев С.П.", room: "405 3D" }
                ]
            },
            "2025-04-29": {
                lessons: [
                    { type: "lesson", name: "Разработка мобильных приложений", start: "11:35", end: "13:05", teacher: "Морозов В.В.", room: "405 3D" },
                    { type: "break", name: "Обед", start: "13:05", end: "13:15" },
                    { type: "lesson", name: "Объектно-ориентированное программирование с использованием языка C++", start: "13:15", end: "14:45", teacher: "Морозов В.В.", room: "405 3D" }
                ]
            },
            "2025-04-30": {
                lessons: [
                    { type: "lesson", name: "История СПО", start: "08:00", end: "09:30", teacher: "Балтаев С.Р.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "09:30", end: "09:40" },
                    { type: "lesson", name: "Объектно-ориентированное программирование с использованием языка C++", start: "09:40", end: "11:10", teacher: "Морозов В.В.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "11:10", end: "11:35" },
                    { type: "lesson", name: "Объектно-ориентированное программирование с использованием языка C++", start: "11:35", end: "13:05", teacher: "Морозов В.В.", room: "405 3D" },
                    { type: "break", name: "Обед", start: "13:05", end: "13:15" },
                    { type: "lesson", name: "Иностранный язык в профессиональной деятельности РПО", start: "13:15", end: "14:45", teacher: "Реснянский А.В.", room: "405 3D" }
                ]
            },
            "2025-05-01": {
                lessons: [
                    { type: "lesson", name: "Разработка мобильных приложений", start: "08:00", end: "09:30", teacher: "Морозов В.В.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "09:30", end: "09:40" },
                    { type: "lesson", name: "Разработка мобильных приложений", start: "09:40", end: "11:10", teacher: "Морозов В.В.", room: "405 3D" }
                ]
            },
            "2025-05-02": {
                lessons: [
                    { type: "lesson", name: "Разработка программных модулей", start: "08:00", end: "09:30", teacher: "Медведев С.П.", room: "405 3D" },
                    { type: "break", name: "Перерыв", start: "09:30", end: "09:40" },
                    { type: "lesson", name: "Разработка программных модулей", start: "09:40", end: "11:10", teacher: "Медведев С.П.", room: "405 3D" }
                ]
            },
            "2025-05-03": {
                lessons: []
            },
            "2025-05-04": {
                lessons: []
            }
        };

        // Список студентов
        const students = [
            { id: "nikita", name: "Левенцов Никита" },
            { id: "andrey", name: "Попов Андрей" },
            { id: "dima", name: "Перов Дима" },
            { id: "sanya", name: "Клеймёнов Саня" },
            { id: "ilya", name: "Климов Илья" },
            { id: "vanya", name: "Нефёдов Ваня" },
            { id: "popov_sanya", name: "Попов Саня" },
            { id: "anton", name: "Подугольников Антон" },
            { id: "vishnya", name: "Вишня" },
            { id: "makar", name: "Воротников Макар" },
            { id: "sergey", name: "Сергей" },
            { id: "sila", name: "Сила божья" }
        ];

        // Инициализация анимированного фона с созвездиями
        function initConstellationsBackground() {
            const canvas = document.getElementById('constellations-bg');
            const ctx = canvas.getContext('2d');
            
            // Устанавливаем размер canvas
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // Звезды
            const stars = [];
            const starCount = 100;
            
            // Создаем звезды
            for (let i = 0; i < starCount; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: 1 + Math.random() * 2,
                    speedX: -0.2 + Math.random() * 0.4,
                    speedY: -0.2 + Math.random() * 0.4,
                    color: `rgba(255, 255, 255, ${0.5 + Math.random() * 0.5})`,
                    connections: []
                });
            }
            
            // Определяем созвездия (точки, которые будут соединяться)
            const constellations = [
                // Большая Медведица
                { points: [0, 1, 2, 3, 4, 5, 6], color: "rgba(96, 165, 250, 0.5)" },
                // Малая Медведица
                { points: [10, 11, 12, 13, 14, 15, 16], color: "rgba(52, 211, 153, 0.5)" }
            ];
            
            // Обработчик движения мыши
            let mouseX = null;
            let mouseY = null;
            
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });
            
            document.addEventListener('mouseout', () => {
                mouseX = null;
                mouseY = null;
            });
            
            // Функция анимации
            function animate() {
                // Очищаем canvas
                ctx.fillStyle = 'rgba(15, 23, 42, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Обновляем и рисуем звезды
                stars.forEach(star => {
                    // Обновляем позицию
                    star.x += star.speedX;
                    star.y += star.speedY;
                    
                    // Реакция на курсор мыши
                    if (mouseX !== null && mouseY !== null) {
                        const dx = mouseX - star.x;
                        const dy = mouseY - star.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 150) {
                            // Отталкивание от курсора
                            star.x -= dx * 0.02;
                            star.y -= dy * 0.02;
                        }
                    }
                    
                    // Проверяем границы
                    if (star.x < 0 || star.x > canvas.width) star.speedX *= -1;
                    if (star.y < 0 || star.y > canvas.height) star.speedY *= -1;
                    
                    // Рисуем звезду
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                    ctx.fillStyle = star.color;
                    ctx.fill();
                });
                
                // Рисуем созвездия
                constellations.forEach(constellation => {
                    ctx.strokeStyle = constellation.color;
                    ctx.lineWidth = 1;
                    
                    for (let i = 0; i < constellation.points.length - 1; i++) {
                        const star1 = stars[constellation.points[i]];
                        const star2 = stars[constellation.points[i + 1]];
                        
                        // Проверяем расстояние между звездами
                        const dx = star1.x - star2.x;
                        const dy = star1.y - star2.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 300) {
                            ctx.beginPath();
                            ctx.moveTo(star1.x, star1.y);
                            ctx.lineTo(star2.x, star2.y);
                            ctx.stroke();
                        }
                    }
                });
                
                requestAnimationFrame(animate);
            }
            
            animate();
            
            // Обработчик изменения размера окна
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }

        // Инициализация списка студентов
        function initAttendanceList() {
            const attendanceList = document.getElementById('attendance-list');
            const totalStudents = document.getElementById('total-students');
            
            totalStudents.textContent = students.length;
            
            students.forEach(student => {
                const studentItem = document.createElement('div');
                studentItem.className = 'student-item';
                studentItem.id = student.id;
                studentItem.innerHTML = `<i class="fas fa-user"></i> ${student.name}`;
                studentItem.addEventListener('click', () => togglePresence(student.id));
                attendanceList.appendChild(studentItem);
            });
        }

        // Переключение присутствия студента
        function togglePresence(studentId) {
            const studentItem = document.getElementById(studentId);
            studentItem.classList.toggle('selected');
            
            // Обновляем счетчик присутствующих
            updateAttendanceCount();
        }

        // Обновление счетчика присутствующих
        function updateAttendanceCount() {
            const selectedStudents = document.querySelectorAll('.student-item.selected');
            const attendanceCount = document.getElementById('attendance-count');
            const progressBar = document.getElementById('attendance-progress');
            
            attendanceCount.textContent = selectedStudents.length;
            
            // Обновляем прогресс бар
            const percentage = Math.round((selectedStudents.length / students.length) * 100);
            progressBar.style.width = `${percentage}%`;
        }

        // Инициализация календаря
        function initCalendar() {
            const now = new Date();
            currentMonth = now.getMonth();
            currentYear = now.getFullYear();
            
            renderCalendar(currentMonth, currentYear);
            
            // Обработчики кнопок переключения месяцев
            document.getElementById('prev-month').addEventListener('click', () => {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                renderCalendar(currentMonth, currentYear);
            });
            
            document.getElementById('next-month').addEventListener('click', () => {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                renderCalendar(currentMonth, currentYear);
            });
        }

        // Отрисовка календаря
        function renderCalendar(month, year) {
            const calendarGrid = document.getElementById('calendar-grid');
            const monthNames = ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь",
                               "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"];
            
            // Обновляем заголовок
            document.querySelector('.calendar-title').textContent = `${monthNames[month]} ${year}`;
            
            // Очищаем предыдущие дни (кроме заголовков)
            while (calendarGrid.children.length > 7) {
                calendarGrid.removeChild(calendarGrid.lastChild);
            }
            
            // Первый день месяца
            const firstDay = new Date(year, month, 1);
            // Последний день месяца
            const lastDay = new Date(year, month + 1, 0);
            // День недели первого дня месяца
            const startingDay = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1;
            
            // Пустые ячейки для дней предыдущего месяца
            for (let i = 0; i < startingDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day';
                calendarGrid.appendChild(emptyDay);
            }
            
            // Дни текущего месяца
            for (let i = 1; i <= lastDay.getDate(); i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day';
                day.textContent = i;
                
                // Форматируем дату для сравнения
                const dateStr = formatDate(new Date(year, month, i));
                
                // Проверяем, есть ли пары в этот день
                if (scheduleData[dateStr] && scheduleData[dateStr].lessons.length > 0) {
                    day.classList.add('has-lessons');
                }
                
                // Проверяем выходные
                const dayOfWeek = new Date(year, month, i).getDay();
                if (dayOfWeek === 0 || dayOfWeek === 6) {
                    day.classList.add('weekend');
                }
                
                // Подсвечиваем текущий день
                const today = new Date();
                if (i === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                    day.classList.add('current');
                }
                
                // Сохраняем дату для обработки клика
                day.dataset.date = dateStr;
                
                day.addEventListener('click', () => showDaySchedule(dateStr));
                
                calendarGrid.appendChild(day);
            }
        }

        // Показать расписание на день
        function showDaySchedule(dateStr) {
            const modal = document.getElementById('calendar-modal');
            const modalTitle = document.getElementById('modal-day-title');
            const modalSchedule = document.getElementById('modal-day-schedule');
            
            const date = parseDate(dateStr);
            const dayNames = ["Воскресенье", "Понедельник", "Вторник", "Среда", "Четверг", "Пятница", "Суббота"];
            const monthNames = ["января", "февраля", "марта", "апреля", "мая", "июня", "июля", "августа", "сентября", "октября", "ноября", "декабря"];
            
            modalTitle.textContent = `Расписание на ${dayNames[date.getDay()]}, ${date.getDate()} ${monthNames[date.getMonth()]}`;
            modalSchedule.innerHTML = '';
            
            if (scheduleData[dateStr] && scheduleData[dateStr].lessons.length > 0) {
                scheduleData[dateStr].lessons.forEach(event => {
                    const scheduleItem = document.createElement('div');
                    scheduleItem.className = 'schedule-item';
                    
                    scheduleItem.innerHTML = `
                        <div class="schedule-time">${event.start} - ${event.end}</div>
                        <div class="schedule-name">${event.name}</div>
                        <div class="schedule-room">${event.room || '-'}</div>
                    `;
                    
                    modalSchedule.appendChild(scheduleItem);
                });
            } else {
                modalSchedule.innerHTML = '<div class="empty-state">Нет занятий</div>';
            }
            
            modal.style.display = 'flex';
        }

        // Обновление таймера и текущего состояния
        function updateSchedule() {
            const now = new Date();
            const currentDate = formatDate(now);
            const currentTime = formatTime(now);
            
            // Получаем расписание на текущий день
            const todaySchedule = scheduleData[currentDate]?.lessons || [];
            
            // Если сегодня выходной
            if (todaySchedule.length === 0) {
                setDayOffState();
                return;
            }
            
            // Обновляем расписание на день
            updateDaySchedule(todaySchedule, currentTime);
            
            // Находим текущее занятие/перерыв
            let currentEvent = null;
            let nextEvent = null;
            let prevEvent = null;
            let currentIndex = -1;
            
            for (let i = 0; i < todaySchedule.length; i++) {
                const event = todaySchedule[i];
                
                if (currentTime >= event.start && currentTime <= event.end) {
                    currentEvent = event;
                    currentIndex = i;
                    break;
                }
            }
            
            // Если сейчас между занятиями (перерыв после последнего)
            if (!currentEvent && todaySchedule.length > 0) {
                const lastEvent = todaySchedule[todaySchedule.length - 1];
                if (currentTime > lastEvent.end) {
                    setBetweenDaysState();
                    return;
                }
            }
            
            // Если сейчас перед первым занятием
            if (!currentEvent && todaySchedule.length > 0) {
                const firstEvent = todaySchedule[0];
                if (currentTime < firstEvent.start) {
                    setBeforeFirstLessonState(firstEvent);
                    return;
                }
            }
            
            // Если сейчас перерыв между занятиями
            if (!currentEvent) {
                // Находим между какими занятиями мы находимся
                for (let i = 0; i < todaySchedule.length - 1; i++) {
                    const current = todaySchedule[i];
                    const next = todaySchedule[i + 1];
                    
                    if (currentTime > current.end && currentTime < next.start) {
                        currentEvent = {
                            type: "break",
                            name: "Перерыв",
                            start: current.end,
                            end: next.start,
                            teacher: "",
                            room: ""
                        };
                        currentIndex = i;
                        break;
                    }
                }
            }
            
            // Определяем следующее и предыдущее события
            if (currentIndex > 0) {
                prevEvent = todaySchedule[currentIndex - 1];
            }
            
            if (currentIndex < todaySchedule.length - 1) {
                nextEvent = todaySchedule[currentIndex + 1];
            }
            
            // Обновляем UI
            updateCurrentEventUI(currentEvent, nextEvent, prevEvent, now);
        }

        // Установка состояния "перед первым занятием"
        function setBeforeFirstLessonState(firstEvent) {
            const startTime = parseTime(firstEvent.start);
            const now = new Date();
            const diffMs = startTime - now;
            
            // Если до начала меньше 30 минут, показываем таймер
            if (diffMs <= 30 * 60 * 1000) {
                updateTimerDisplay(diffMs, "До начала первой пары");
                
                document.getElementById('status-type').textContent = "Скоро пара";
                document.getElementById('status-type').className = "status-badge lesson";
                
                document.getElementById('current-lesson').innerHTML = `
                    <h3 class="lesson-name">${firstEvent.name}</h3>
                    <div class="lesson-time"><i class="far fa-clock"></i> ${firstEvent.start} - ${firstEvent.end}</div>
                    <div class="lesson-details">
                        <div class="detail-item"><i class="fas fa-user-tie"></i> Преподаватель: ${firstEvent.teacher}</div>
                        <div class="detail-item"><i class="fas fa-door-open"></i> Аудитория: ${firstEvent.room}</div>
                    </div>
                `;
                
                // Анимация начала занятия при <5 минут
                if (diffMs < 5 * 60 * 1000) {
                    document.getElementById('timer').classList.add('lesson-starting');
                    document.getElementById('timer').classList.remove('pulse', 'timer-ending');
                } else {
                    document.getElementById('timer').classList.remove('lesson-starting');
                }
            } else {
                document.getElementById('timer').textContent = "До пар более 30 минут";
                document.getElementById('timer').classList.remove('pulse', 'timer-ending', 'lesson-starting');
                
                document.getElementById('status-type').textContent = "Занятий нет";
                document.getElementById('status-type').className = "status-badge dayoff";
                
                document.getElementById('current-lesson').innerHTML = `
                    <h3 class="lesson-name">До начала занятий</h3>
                    <div class="lesson-time"><i class="far fa-clock"></i> Первая пара в ${firstEvent.start}</div>
                `;
            }
            
            // Обновляем следующее и предыдущее события
            document.getElementById('next-lesson').innerHTML = `
                <div class="next-prev-name">${firstEvent.name}</div>
                <div class="next-prev-time">${firstEvent.start} - ${firstEvent.end}</div>
            `;
            
            document.getElementById('prev-lesson').innerHTML = `
                <div class="empty-state">Отсутствует</div>
            `;
        }

        // Установка состояния "между днями" (после последнего занятия)
        function setBetweenDaysState() {
            document.getElementById('timer').textContent = "До завтра";
            document.getElementById('timer').classList.add('day-ending');
            document.getElementById('timer').classList.remove('pulse', 'timer-ending', 'lesson-starting');
            
            document.getElementById('status-type').textContent = "Занятия окончены";
            document.getElementById('status-type').className = "status-badge dayoff";
            
            document.getElementById('current-lesson').innerHTML = `
                <h3 class="lesson-name">Занятия на сегодня окончены</h3>
            `;
            
            // Находим расписание на завтра
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowDate = formatDate(tomorrow);
            const tomorrowSchedule = scheduleData[tomorrowDate]?.lessons || [];
            
            if (tomorrowSchedule.length > 0) {
                const firstLesson = tomorrowSchedule[0];
                
                document.getElementById('next-lesson').innerHTML = `
                    <div class="next-prev-name">Завтра: ${firstLesson.name}</div>
                    <div class="next-prev-time">${firstLesson.start} - ${firstLesson.end}</div>
                `;
            } else {
                document.getElementById('next-lesson').innerHTML = `
                    <div class="empty-state">Завтра выходной</div>
                `;
            }
            
            // Предыдущее событие - последнее занятие сегодня
            const today = formatDate(new Date());
            const todaySchedule = scheduleData[today]?.lessons || [];
            if (todaySchedule.length > 0) {
                const lastLesson = todaySchedule[todaySchedule.length - 1];
                
                document.getElementById('prev-lesson').innerHTML = `
                    <div class="next-prev-name">${lastLesson.name}</div>
                    <div class="next-prev-time">${lastLesson.start} - ${lastLesson.end}</div>
                `;
            }
        }

        // Установка состояния "выходной"
        function setDayOffState() {
            document.getElementById('timer').textContent = "Выходной";
            document.getElementById('timer').classList.add('day-ending');
            document.getElementById('timer').classList.remove('pulse', 'timer-ending', 'lesson-starting');
            
            document.getElementById('status-type').textContent = "Выходной";
            document.getElementById('status-type').className = "status-badge dayoff";
            
            document.getElementById('current-lesson').innerHTML = `
                <h3 class="lesson-name">Выходной день</h3>
                <div class="lesson-time">Нет занятий</div>
            `;
            
            // Находим следующее занятие (ближайший учебный день)
            let nextStudyDay = findNextStudyDay();
            if (nextStudyDay) {
                const firstLesson = nextStudyDay.lessons[0];
                const daysUntil = getDaysUntil(nextStudyDay.date);
                
                document.getElementById('next-lesson').innerHTML = `
                    <div class="next-prev-name">${firstLesson.name}</div>
                    <div class="next-prev-time">Через ${daysUntil}, ${firstLesson.start}</div>
                `;
            } else {
                document.getElementById('next-lesson').innerHTML = `
                    <div class="empty-state">Нет данных о следующих занятиях</div>
                `;
            }
            
            document.getElementById('prev-lesson').innerHTML = `
                <div class="empty-state">Отсутствует</div>
            `;
        }

        // Поиск следующего учебного дня
        function findNextStudyDay() {
            const date = new Date();
            
            for (let i = 1; i <= 7; i++) {
                date.setDate(date.getDate() + 1);
                const dateStr = formatDate(date);
                if (scheduleData[dateStr]?.lessons?.length > 0) {
                    return {
                        date: dateStr,
                        ...scheduleData[dateStr]
                    };
                }
            }
            
            return null;
        }

        // Получение строки "через N дней"
        function getDaysUntil(dateStr) {
            const targetDate = parseDate(dateStr);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            const diffDays = Math.ceil((targetDate - today) / (1000 * 60 * 60 * 24));
            
            if (diffDays === 1) return "1 день";
            if (diffDays >= 2 && diffDays <= 4) return `${diffDays} дня`;
            return `${diffDays} дней`;
        }

        // Обновление UI текущего события
        function updateCurrentEventUI(currentEvent, nextEvent, prevEvent, now) {
            const endTime = parseTime(currentEvent.end);
            const diffMs = endTime - now;
            
            // Обновляем таймер
            updateTimerDisplay(diffMs, currentEvent.type === "lesson" ? "До конца пары" : "До конца перерыва");
            
            // Обновляем тип события
            const statusType = document.getElementById('status-type');
            statusType.textContent = currentEvent.type === "lesson" ? "Пара" : "Перерыв";
            statusType.className = currentEvent.type === "lesson" ? "status-badge lesson" : "status-badge break";
            
            // Обновляем информацию о текущем событии
            const currentLessonEl = document.getElementById('current-lesson');
            
            if (currentEvent.type === "lesson") {
                currentLessonEl.innerHTML = `
                    <h3 class="lesson-name">${currentEvent.name}</h3>
                    <div class="lesson-time"><i class="far fa-clock"></i> ${currentEvent.start} - ${currentEvent.end}</div>
                    <div class="lesson-details">
                        <div class="detail-item"><i class="fas fa-user-tie"></i> Преподаватель: ${currentEvent.teacher}</div>
                        <div class="detail-item"><i class="fas fa-door-open"></i> Аудитория: ${currentEvent.room}</div>
                    </div>
                `;
            } else {
                currentLessonEl.innerHTML = `
                    <h3 class="lesson-name">${currentEvent.name}</h3>
                    <div class="lesson-time"><i class="far fa-clock"></i> ${currentEvent.start} - ${currentEvent.end}</div>
                `;
            }
            
            // Обновляем следующее событие
            const nextLessonEl = document.getElementById('next-lesson');
            if (nextEvent) {
                nextLessonEl.innerHTML = `
                    <div class="next-prev-name">${nextEvent.name}</div>
                    <div class="next-prev-time">${nextEvent.start} - ${nextEvent.end}</div>
                `;
            } else {
                nextLessonEl.innerHTML = `
                    <div class="empty-state">Отсутствует</div>
                `;
            }
            
            // Обновляем предыдущее событие
            const prevLessonEl = document.getElementById('prev-lesson');
            if (prevEvent) {
                prevLessonEl.innerHTML = `
                    <div class="next-prev-name">${prevEvent.name}</div>
                    <div class="next-prev-time">${prevEvent.start} - ${prevEvent.end}</div>
                `;
            } else {
                prevLessonEl.innerHTML = `
                    <div class="empty-state">Отсутствует</div>
                `;
            }
        }

        // Обновление отображения таймера
        function updateTimerDisplay(diffMs, label) {
            const timerEl = document.getElementById('timer');
            const timerLabel = document.querySelector('.timer-label');
            
            timerLabel.textContent = label;
            
            if (diffMs <= 0) {
                timerEl.textContent = "00:00:00";
                timerEl.classList.add('timer-ending');
                timerEl.classList.remove('pulse', 'lesson-starting');
                return;
            }
            
            const hours = Math.floor(diffMs / (1000 * 60 * 60));
            const minutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diffMs % (1000 * 60)) / 1000);
            
            timerEl.textContent = 
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            
            // Включаем пульсацию, если осталось меньше 5 минут
            if (diffMs < 5 * 60 * 1000) {
                timerEl.classList.add('pulse');
                timerEl.classList.remove('timer-ending', 'lesson-starting');
                
                // Если это начало занятия, добавляем специальную анимацию
                if (label === "До начала первой пары") {
                    timerEl.classList.add('lesson-starting');
                }
            } else {
                timerEl.classList.remove('pulse', 'timer-ending', 'lesson-starting');
            }
        }

        // Обновление расписания на день
        function updateDaySchedule(schedule, currentTime) {
            const dayScheduleEl = document.getElementById('day-schedule');
            dayScheduleEl.innerHTML = '';
            
            let currentEventFound = false;
            
            schedule.forEach(event => {
                const scheduleItem = document.createElement('div');
                scheduleItem.className = 'schedule-item';
                
                // Проверяем, является ли это текущим событием
                if (currentTime >= event.start && currentTime <= event.end) {
                    scheduleItem.classList.add('current');
                    currentEventFound = true;
                }
                
                scheduleItem.innerHTML = `
                    <div class="schedule-time">${event.start} - ${event.end}</div>
                    <div class="schedule-name">${event.name}</div>
                    <div class="schedule-room">${event.room || '-'}</div>
                `;
                
                dayScheduleEl.appendChild(scheduleItem);
            });
        }

        // Вспомогательные функции для работы с датами
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        function parseDate(dateStr) {
            const [year, month, day] = dateStr.split('-').map(Number);
            return new Date(year, month - 1, day);
        }
        
        function formatTime(date) {
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            return `${hours}:${minutes}`;
        }
        
        function parseTime(timeStr) {
            const [hours, minutes] = timeStr.split(':').map(Number);
            const date = new Date();
            date.setHours(hours, minutes, 0, 0);
            return date;
        }

        // Инициализация
        document.addEventListener('DOMContentLoaded', () => {
            initConstellationsBackground();
            initAttendanceList();
            initCalendar();
            updateSchedule();
            setInterval(updateSchedule, 1000);
            
            // Обработчик закрытия модального окна
            document.getElementById('modal-close').addEventListener('click', () => {
                document.getElementById('calendar-modal').style.display = 'none';
            });
            
            // Закрытие модального окна при клике вне его
            document.getElementById('calendar-modal').addEventListener('click', (e) => {
                if (e.target === document.getElementById('calendar-modal')) {
                    document.getElementById('calendar-modal').style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>
